<!DOCTYPE html>
<html lang="gl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mapa dos murais</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

<style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: "Segoe UI", sans-serif;
      background: #f8f8f8;
      overflow: hidden;
    }

    #container {
      display: flex;
      height: 100vh;
      width: 100%;
    }

    #map-desktop, #image-panel, #info-panel {
      flex: 1;
      transition: all 0.5s ease;
    }

    #map-desktop {
      height: 100%;
    }

    #image-panel {
      background: #f0f0f0;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      border-left: 2px solid #ddd;
      border-right: 2px solid #ddd;
    }

    #image-panel img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    #info-panel {
      background: white;
      padding: 1rem 1.5rem;
      overflow-y: auto;
      box-shadow: inset 0 0 20px rgba(0,0,0,0.05);
    }

    #info-content {
      transition: opacity 0.5s;
      color: #1E3A8A
    }

    .info-text h2 {
      font-weight: bold;
      font-size: x-large;
      color: #1E3A8A;
      margin-bottom: 0.3rem;
    }

    .artista {
      font-weight: bold;
      font-size: larger;
      color: #1E3A8A;
      margin-bottom: 0.3rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .titulo {
      font-weight: bold;
      font-size: large;
      font-style: italic;
      margin-bottom: 0.8rem;
      color: #1E3A8A;
    }

    .descripcion {
      text-align: justify;
    }

    #info-panel p,
    #info-content-mobile p {
      font-size: 0.95rem;
      line-height: 1.5;
      color: #666;
    }

    .artist-links {
      display: flex;
      gap: 10px;
      margin-top: 0.5rem;
    }

    .icon-link i {
      font-size: 20px;
      cursor: pointer;
      transition: 0.2s ease-in-out;
      color: #444;
    }

    .icon-link i:hover {
      transform: scale(1.2);
      color: #ff6600;
    }

    /* --- DISEÑO RESPONSIVE --- */
    #map-mobile {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      z-index: 1;
      display: none;
    }

    #side-panel {
      position: fixed;
      top: 0;
      right: -100%;
      width: 80%;
      height: 100%;
      background: white;
      box-shadow: -3px 0 15px rgba(0,0,0,0.2);
      z-index: 999;
      transition: right 0.5s ease;
      display: flex;
      flex-direction: column;
    }

    #side-panel.active {
      right: 0;
    }

    #close-panel {
      position: absolute;
      left: -35px;
      top: 50%;
      transform: translateY(-50%);
      background: #1E3A8A;
      color: white;
      border: none;
      border-radius: 8px 0 0 8px;
      padding: 8px 10px;
      cursor: pointer;
      z-index: 1000;
      box-shadow: -2px 0 5px rgba(0,0,0,0.2);
    }

    #panel-content {
      flex: 1;
      overflow-y: auto;
    }

    #panel-content img {
      width: 100%;
      height: auto;
      object-fit: cover;
      display: block;
    }

    #info-content-mobile {
      padding: 1rem 1.5rem;
    }

    #start-message {
      position: absolute;
      top: 15px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.9);
      padding: 10px 18px;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      z-index: 10;
      font-size: 1rem;
      color: #1E3A8A;
      font-weight: bold;
      display: none;
    }

    @media (max-width: 992px) {
      #container {
        display: none;
      }
      #map-mobile, #start-message {
        text-align: center;
        display: block;
      }
    }

    @media (min-width: 993px) {
      #side-panel, #close-panel, #start-message {
        display: none;
      }
    }
  </style>
</head>

<body>
  <!-- Vista escritorio -->
  <div id="container">
    <div id="map-desktop"></div>
    <div id="image-panel">
      <img id="mural-image" src="https://raw.githubusercontent.com/sandravaztui/aqui-antes-habia-un-muino/main/cartaz-aqui-antes-habia-un-muino.png" alt="Imaxe do mural">
    </div>
    <div id="info-panel">
      <div id="info-content">
        <h2>Selecciona un punto no mapa</h2>
      </div>
    </div>
  </div>

  <!-- Vista móvil -->
  <div id="map-mobile"></div>
  <div id="start-message">Selecciona un punto no mapa</div>

  <div id="side-panel">
    <button id="close-panel"><i class="fa-solid fa-chevron-right"></i></button>
    <div id="panel-content">
      <img id="panel-image" src="" alt="Mural" />
      <div id="info-content-mobile"></div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const isMobile = window.innerWidth < 992;
      const map = L.map(isMobile ? "map-mobile" : "map-desktop", { scrollWheelZoom: false })
        .setView([43.3613, -8.4185], 17);

      L.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png", {
        attribution: '&copy; <a href="https://www.openstreetmap.org/">OSM</a> | &copy; <a href="https://carto.com/">CARTO</a>',
        subdomains: "abcd",
        maxZoom: 19
      }).addTo(map);

      const puntos = [
        {
          titulo: "<em>O Muíño da Gramela, 1788</em>",
          descripcion: `Antigo muíño de vento situado no barrio do Agra do Orzán, símbolo da memoria industrial da cidade.`,
          coords: [43.3613, -8.4177],
          img: "https://www.asociacionbuxa.com/wp-content/uploads/2024/07/20200609-174852.jpg"
        },
        {
          artista: "De Letras",
          titulo: "<em>Reflejo memoria. 2025</em>",
          descripcion: `A obra aliméntase do visual a partir de dous elementos da cultura galega: a tipografía característica de Galicia e a identidade visual do proxecto Sargadelos, e constrúese desde o simbólico co muíño, un elemento clave no contexto da obra e un símbolo galego. Os tres conforman unha tríade patrimonial orientada á posta en valor da memoria. Da letra galega tómanse principalmente a súa forma, incorporando variacións nos caracteres para salientar a intervención artesanal, e de Sargadelos retómase a sintaxe visual dos seus obxectos e o uso da cor. Todo isto realízase mediante a técnica de pintura sobre vidro, inspirándose na letra pintada e na tradición da rotulación de vidreiras, onde o reflexo remite á memoria do muíño e, ao mesmo tempo, permite verse xunto a el.`,
          instagram: [
            "https://www.instagram.com/geraborras?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==",
            "https://www.instagram.com/eri_papupi?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw=="],
          coords: [43.3613, -8.4176],
          ubicacion: "AVDA. GRAMELA 16. Libraría Galgo Azul",
          img: "https://raw.githubusercontent.com/sandravaztui/aqui-antes-habia-un-muino/main/mural-gerardo-borras-y-erica-paolucci-avenida-gramela-16.jpg"
        },
        {
          artista: "David Pintor",
          titulo: "<em>Muíño da Gramela. 2025</em>",
          descripcion: `Este é, inda que non o pareza, un mural onírico. Nel aparece o muíño da Gramela como un punto de referencia máis da cidade como o é a Torre de Hércules ou o depósito de augas de Monte Alto. Así tamén o pintou Picasso no seu momento, coma un punto singular. No deseño, o muíño dialoga coa cidade pedindo esa "incorporación" á paisaxe coruñesa, inda que só sexa, de momento, a través da memoria. <br>O muíño aparece coronando un espazo verde enorme, que é o que pide un barrio castigado por un urbanismo demasiado duro. Un espazo verde no que estar, no que vivir, e que dignifique unha zona da Coruña esquecida e fora dos plans máis ambiciosos.`,
          instagram: "https://www.instagram.com/davidpintor1975?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==",
          web: "https://www.davidpintor.com/",
          coords: [43.3611,-8.4174],
          ubicacion: "ALCALDE LENS 1. Empresa Galicia Cleans",
          img: "https://raw.githubusercontent.com/sandravaztui/aqui-antes-habia-un-muino/main/mural-david-pintor-alcalde-lens-1.jpg"
        },
        {
          artista: "Dime Plaga",
          titulo: "<em>O espírito do muíño. 2025</em>",
          descripcion: `A identidade do barrio vive na súa historia e na súa xente, en quen o habita hoxe, en quen tivemos a fortuna de facelo e nos fitos que marcaron o seu camiño. O barrio regálanos un sentimento de pertenza que nos acompaña para sempre, sen importar a distancia. Os seus espíritos seguen aí, percorrendo as súas rúas e habitando as historias que aínda quedan por contar.`,
          instagram: "https://www.instagram.com/dimeplaga?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==",
          web: "https://www.davidpintor.com/",
          coords: [43.3620,-8.4205],
          ubicacion: "PRAZA DO COMERCIO 6. Fundación Sergio Villar",
          img: "https://raw.githubusercontent.com/sandravaztui/aqui-antes-habia-un-muino/main/mural-dime-plaga-praza-do-comercio-6.jpg"
        },
        {
          artista: "Julia Abalde",
          titulo: "<em>Mural en proceso</em>",
          descripcion: `Moi cedo podrás disfrutar do mural no barrio`,
          instagram: "https://www.instagram.com/juliabalde?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==",
          web: "https://juliabalde.bigcartel.com/",
          coords: [43.3615,-8.4185], 
          ubicacion: "AVENIDA GRAMELA 23 BAIXO. Cociña Tacos Niño Rey",
          img: "https://raw.githubusercontent.com/sandravaztui/aqui-antes-habia-un-muino/main/mural-en-proceso.png"
        },
        {
          artista: "Cuchiflainas",
          titulo: "<em>Mural en proceso</em>",
          descripcion: `Moi cedo podrás disfrutar do mural no barrio`,
          instagram: "https://www.instagram.com/cuchiflainas?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==",
          web: "https://cuchiweb.com/",
          coords: [43.3614,-8.4185],
          ubicacion: "AVENIDA GRAMELA 15. Distrito Arte",
          img: "https://raw.githubusercontent.com/sandravaztui/aqui-antes-habia-un-muino/main/mural-en-proceso.png"
        },
        {
          artista: "Mónica Coto",
          titulo: "<em>Mural en proceso. 2025</em>",
          descripcion: `Esta obra de carácter surrealista fala da conexión da Coruña como cidade mariñeira e labrega, poñendo en valor o desaparecido muíño da Gramela: unha icona que segue a formar parte da memoria colectiva. O mural é un xesto artístico que reivindica a unión entre o pasado e o presente, para que as súas pedras, esquecidas durante anos, poidan volver formar parte da paisaxe e da identidade viva do barrio onde naceu, recuperando así a súa esencia.`,
          instagram: "https://www.instagram.com/monicacoto.art?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==",
          coords: [43.3608,-8.4163],
          ubicacion: "CANCELA DE AFUERA 5. Nails Studio Vip",
          img: "https://raw.githubusercontent.com/sandravaztui/aqui-antes-habia-un-muino/main/mural-en-proceso.png"
        },
        {
          artista: "Laprislazuli",
          titulo: "<em>Mural en proceso</em>",
          descripcion: `Moi cedo podrás disfrutar do mural no barrio`,
          instagram: "https://www.instagram.com/laprislazuli?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==",
          web: "https://www.laprislazuli.com/",
          coords: [43.3616, -8.4194],
          ubicacion: "AV. CONCHIÑAS 17-21. Aparcadoiro As Conchiñas",
          img: "https://raw.githubusercontent.com/sandravaztui/aqui-antes-habia-un-muino/main/mural-en-proceso.png"
        }
      ];

      const iconDefault = L.icon({
        iconUrl: "https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-icon.png",
        shadowUrl: "https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",
        iconSize: [25, 41],
        iconAnchor: [12, 41],
      });
      
      const iconGris = L.icon({
        iconUrl: "https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-grey.png",
        shadowUrl: "https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/images/marker-shadow.png",
        iconSize: [25, 41],
        iconAnchor: [12, 41],
      });
      
      const imagePanel = document.getElementById("mural-image");
      const infoPanel = document.getElementById("info-content");
      const sidePanel = document.getElementById("side-panel");
      const panelImage = document.getElementById("panel-image");
      const infoContentMobile = document.getElementById("info-content-mobile");
      const startMessage = document.getElementById("start-message");
      const closePanel = document.getElementById("close-panel");

      puntos.forEach(p => {
        const icon = p.titulo.includes("Mural en proceso") ? iconGris : iconDefault;
        const marker = L.marker(p.coords, { icon }).addTo(map);

        marker.on("click", () => {
          const artistLinks = `
            ${p.web ? `<a href="${p.web}" target="_blank" class="icon-link" title="Web"><i class="fa-solid fa-globe"></i></a>` : ""}
            ${p.instagram ? `<a href="${p.instagram}" target="_blank" class="icon-link" title="Instagram"><i class="fa-brands fa-instagram"></i></a>` : ""}
          `;

          const contentHTML = `
            <div class="artista">${p.artista ?? ""}</div>
            <div class="titulo">${p.titulo ?? ""}</div>
            <p class="ubicacion">${p.ubicacion ?? ""}</p>
            <p class="descripcion">${p.descripcion ?? ""}</p>
            <div class="artist-links">${artistLinks}</div>
          `;

          if (window.innerWidth >= 992) {
            infoPanel.style.opacity = 0;
            setTimeout(() => {
              infoPanel.innerHTML = contentHTML;
              infoPanel.style.opacity = 1;
              imagePanel.src = p.img || "";
            }, 300);
          } else {
            startMessage.style.display = "none";
            infoContentMobile.innerHTML = contentHTML;
            panelImage.src = p.img || "";
            sidePanel.classList.add("active");
          }
        });
      });

      closePanel.addEventListener("click", () => {
        sidePanel.classList.remove("active");
      });
    });
  </script>
</body>
</html>
